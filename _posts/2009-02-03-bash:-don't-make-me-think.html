<p>
<a href="http://muness.blogspot.com/2008/06/stop-presses-bash-said-to-embrace.html">Last week</a> I figured out a way to make my life a little bit easier  by abstracting the scm I was using and having the prompt indicate whether I was in a Subversion or Git.  Thanks to Mike Hommey whose <A HREF=http://glandium.org/blog/?p=170>script</A> I tweaked for my needs.
</p>
<p>
For a long time, I've wanted my iTerm tab title to be more useful.  I started by having it display the last process I executed in that tab (this also shows the full path in iTerm's window title bar):
<pre>
<code>
PS1='\[\e]2;\h::\]${PWD/$HOME/~}\[\a\]\[\e]1;\]$(history 1 | sed -e "s/^[ ]*[0-9]*[ ]*//g")\a\]\$ '
</code>
</pre>
</p>
<p>
Next up I wanted to show the currently running command.  Google showed <a href="http://www.davidpashley.com/articles/xterm-titles-with-bash.html">me how</a>:
<pre>
<code>
trap 'echo -e "\e]1;$BASH_COMMAND\007\c"' DEBUG
</code>
</pre>
<p>Instead of trying to explain this code I'll quote the Bash man page:
<blockquote>
BASH_COMMAND<br/>
The  command  currently being executed or about to be executed, unless the shell is executing a command as the result of a trap, in which case it is the command executing at the time of the trap.
</blockquote>
</p>
<p>
Some more tweaks followed:
<ul>
<li>Distinguish between a previously executed command and a currently executing command by decorating them (I chose surrounding the former with braces and the latter with &gt;/&lt;. e.g. <code>[ls] and &gt;vi&lt;</code>).
<li>Show the context of the executing command in the tab. This is just the repository where I executed the command.
<li>Make this coexist with TextMate.
</ul>
</p>
<p>
And a screenshot to summarize:
<a onblur="try {parent.deselectBloggerImageGracefully();} catch(e) {}" href="http://2.bp.blogspot.com/_X2VtRiH_7DA/SFcPaHEgkdI/AAAAAAAAArw/xVgpaEFFg94/s1600-h/dont-make-me-think-iterm.jpg"><img style="display:block; margin:0px auto 10px; text-align:center;cursor:pointer; cursor:hand;" src="http://2.bp.blogspot.com/_X2VtRiH_7DA/SFcPaHEgkdI/AAAAAAAAArw/xVgpaEFFg94/s800/dont-make-me-think-iterm.jpg" border="0" alt=""id="BLOGGER_PHOTO_ID_5212652034953613778" /></a>
</p>

<p>The code is in github<a href="http://github.com/relevance/etc/tree/master/bash/bash_vcs.sh">/relevance/etc/tree/master/bash/bash_vcs.sh</a>.
</p>
<p>
Install instructions:
<pre>
<code>
curl -L http://github.com/relevance/etc/tree/master%2Fbash%2Fbash_vcs.sh?raw=true > ~/.bash_dont_think.sh
echo "source ~/.bash_dont_think.sh" >> ~/.bash_profile
</code>
</pre>
</p>
<p>Enjoy!  Tested with iTerm on Leopard.</p>
